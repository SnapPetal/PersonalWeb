spring:
  application:
    name: "personal"

  # Thymeleaf Configuration
  thymeleaf:
    cache: false

  # Database Configuration
  datasource:
    url: ${DB_URL:jdbc:postgresql://ls-3cd9e093f05f5c4d801b58031197f04063b55800.cmldxjsfqvn4.us-east-1.rds.amazonaws.com:5432/dbmaster}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: org.postgresql.Driver

  # Liquibase Configuration
  liquibase:
    enabled: true
    change-log: classpath:db/changelog/db.changelog-master.xml

  # JPA/Hibernate Configuration
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        default_schema: trivia
        jdbc:
          time_zone: UTC

  # Spring AI Bedrock Configuration
  ai:
    bedrock:
      converse:
        chat:
          enabled: true
          options:
            model: anthropic.claude-3-sonnet-20240229-v1:0
            temperature: 0.7
            max-tokens: 1500
            top-p: 0.9
      aws:
        region: ${AWS_REGION:us-east-1}
        access-key: ${AWS_ACCESS_KEY_ID}
        secret-key: ${AWS_SECRET_ACCESS_KEY}

  # Task Execution (for WebSocket async operations)
  task:
    execution:
      pool:
        core-size: 8
        max-size: 16
        queue-capacity: 100
      thread-name-prefix: websocket-task-

# Bible Verse API Configuration
bible:
  verse:
    api:
      url: https://bibleverse.thonbecker.com/
    cache:
      duration: 24

# Audio Storage Configuration (Dad Jokes)
audio:
  storage:
    bucket: cdn-page-stack-processedmediabucket446d3976-oonhpdwdpfzq
    cdn-domain: https://cdn.thonbecker.com

# Spring Modulith Configuration
spring.modulith:
  # Event publication and handling
  events:
    # Enable event externalization (for publishing to message brokers)
    externalization:
      enabled: false  # Set to true when integrating with Kafka, RabbitMQ, etc.
    # Enable event republication for failed events
    republish-outstanding-events-on-restart: true

  # Module detection and verification
  detection-strategy: explicitly-annotated  # Only detect modules with @ApplicationModule annotation

  # Documentation generation
  moments:
    enable-time-machine: false  # Enable for event sourcing scenarios
