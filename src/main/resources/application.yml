spring:
  application:
    name: "personal"

  # File Upload Configuration
  servlet:
    multipart:
      max-file-size: 100MB
      max-request-size: 100MB

  # Thymeleaf Configuration
  thymeleaf:
    cache: false

  # Database Configuration
  datasource:
    url: jdbc:postgresql://ls-d58c718c47b3e4713b1e40ba54194bc87f99e527.cmldxjsfqvn4.us-east-1.rds.amazonaws.com:5432/dbmaster
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: org.postgresql.Driver

  # Liquibase Configuration
  liquibase:
    enabled: true
    change-log: classpath:db/changelog/db.changelog-master.xml

  # JPA/Hibernate Configuration
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: none  # Liquibase manages all schema
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        jdbc:
          time_zone: UTC

  # Spring AI Bedrock Configuration
  ai:
    bedrock:
      converse:
        chat:
          enabled: true
          options:
            model: us.anthropic.claude-sonnet-4-5-20250929-v1:0
            temperature: 0.3
            max-tokens: 1500
      aws:
        region: ${AWS_REGION:us-east-1}
        access-key: ${AWS_ACCESS_KEY_ID}
        secret-key: ${AWS_SECRET_ACCESS_KEY}

  # Task Execution (for WebSocket async operations)
  task:
    execution:
      pool:
        core-size: 8
        max-size: 16
        queue-capacity: 100
      thread-name-prefix: websocket-task-

# Bible Verse API Configuration
bible:
  verse:
    api:
      url: https://bibleverse.thonbecker.com/
    cache:
      duration: 24

# Audio Storage Configuration (Dad Jokes)
audio:
  storage:
    bucket: cdn-page-stack-processedmediabucket446d3976-oonhpdwdpfzq
    cdn-domain: https://cdn.thonbecker.com

# Spring Modulith Configuration (2.0.1)
spring.modulith:
  # Event publication and handling
  events:
    # Event externalization (for publishing to message brokers)
    externalization:
      enabled: true  # Enable event publication registry
      serialized-execution: true  # NEW in 2.0: Serialize event execution for consistency

    # Event republication for failed events
    republish-outstanding-events-on-restart: true

    # JDBC-based event publication registry
    jdbc-schema-initialization:
      enabled: false  # Liquibase creates the event_publication table (see changeset 019)

  # NEW in 2.0: Startup validation
  validation:
    enabled: true  # Validate module structure at startup

  # NEW in 2.0: Module observability
  observability:
    enabled: true  # Enable module interaction logging and metrics
